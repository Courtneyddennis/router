{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/FSA/Phase 2/router/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/FSA/Phase 2/router/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Desktop/FSA/Phase 2/router/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{useState}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Profile(_ref){var token=_ref.token;var BASE=\"https://strangers-things.herokuapp.com/api/2211-ftb-ct-web-pt\";var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),profilePosts=_useState4[0],setProfilePosts=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];var _useParams=useParams(),name=_useParams.name;useEffect(function(){function getUser(){return _getUser.apply(this,arguments);}function _getUser(){_getUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(token);_context.next=4;return fetch(\"\".concat(BASE,\"/users/me\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 4:response=_context.sent;_context.next=7;return response.json();case 7:result=_context.sent;setProfilePosts(result.data.posts);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return _getUser.apply(this,arguments);}getUser();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"This is \",name,\"'s profile\"]}),profilePosts.map(function(post){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{children:post.title}),/*#__PURE__*/_jsx(\"div\",{children:post.description}),/*#__PURE__*/_jsx(\"div\",{children:post.price}),post.messages.map(function(message){return/*#__PURE__*/_jsx(\"div\",{children:message.fromUser.username!==name?null:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"from user: \",message.fromUser.username]}),/*#__PURE__*/_jsx(\"div\",{children:message.content})]},message._id)});})]})},post._id);})]});}","map":{"version":3,"names":["useEffect","useParams","useState","Profile","token","BASE","messages","setMessages","profilePosts","setProfilePosts","userId","setUserId","name","getUser","console","log","fetch","headers","response","json","result","data","posts","map","post","title","description","price","message","fromUser","username","content","_id"],"sources":["C:/Users/User/Desktop/FSA/Phase 2/router/src/components/Profile.js"],"sourcesContent":["import {useEffect} from \"react\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport {useState} from \"react\";\r\n\r\nexport default function Profile({token}){\r\n    const BASE = \"https://strangers-things.herokuapp.com/api/2211-ftb-ct-web-pt\"\r\n    const[messages,setMessages]=useState(\"\")\r\n    const[profilePosts,setProfilePosts]=useState([])\r\n    const[userId,setUserId]=useState(\"\")\r\n    \r\n    \r\n    let {name}= useParams()\r\n    \r\n    \r\n    useEffect(()=>{\r\n        \r\n    async function getUser(){\r\n        try{\r\n            console.log(token)\r\n            const response = await fetch (`${BASE}/users/me`,{\r\n\r\n                headers:{\r\n                    'Content-Type': 'application/json',\r\n                       'Authorization': `Bearer ${token}`\r\n                    },\r\n        })\r\n        let result = await response.json()\r\n        setProfilePosts(result.data.posts)\r\n        \r\n       \r\n    }catch(err){\r\n        console.log(err)\r\n    }\r\n\r\n    }\r\n    getUser()\r\n\r\n\r\n},[])\r\n\r\n    return(\r\n        <div>\r\n\r\n        \r\n            <div>This is {name}'s profile</div>\r\n        {\r\n            profilePosts.map((post)=>{ \r\n                \r\n                \r\n            return(\r\n            <div key={post._id}>\r\n\r\n                \r\n                \r\n                    <div className=\"card\">\r\n                    <div>{post.title}</div>\r\n                    <div>{post.description}</div>\r\n                    <div>{post.price}</div>\r\n\r\n                    {post.messages.map((message)=>{\r\n                        return(\r\n                            <div>\r\n                                {\r\n                                    message.fromUser.username !== name ?\r\n                                    null : \r\n                                <div key={message._id} className=\"card\">\r\n                                <div>from user: {message.fromUser.username}</div>\r\n                                <div>{message.content}</div>\r\n                                </div>\r\n                                    \r\n                                }\r\n                            </div>\r\n\r\n                        )\r\n                })}\r\n                    </div>\r\n\r\n                     \r\n\r\n\r\n    \r\n                </div>\r\n    \r\n            )\r\n        })}\r\n\r\n        \r\n        </div>\r\n\r\n\r\n    \r\n\r\n        \r\n    )\r\n\r\n}"],"mappings":"0YAAA,OAAQA,SAAS,KAAO,OAAO,CAC/B,OAAQC,SAAS,KAAO,kBAAkB,CAC1C,OAAQC,QAAQ,KAAO,OAAO,CAAC,wFAE/B,cAAe,SAASC,QAAO,MAAS,IAAPC,MAAK,MAALA,KAAK,CAClC,GAAMC,KAAI,CAAG,+DAA+D,CAC5E,cAA4BH,QAAQ,CAAC,EAAE,CAAC,wCAAlCI,QAAQ,eAACC,WAAW,eAC1B,eAAoCL,QAAQ,CAAC,EAAE,CAAC,yCAA1CM,YAAY,eAACC,eAAe,eAClC,eAAwBP,QAAQ,CAAC,EAAE,CAAC,yCAA9BQ,MAAM,eAACC,SAAS,eAGtB,eAAYV,SAAS,EAAE,CAAlBW,IAAI,YAAJA,IAAI,CAGTZ,SAAS,CAAC,UAAI,SAECa,QAAO,iIAAtB,wKAEQC,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC,uBACKY,MAAK,WAAKX,IAAI,cAAY,CAE7CY,OAAO,CAAC,CACJ,cAAc,CAAE,kBAAkB,CAC/B,eAAe,kBAAYb,KAAK,CACnC,CACZ,CAAC,CAAC,QANQc,QAAQ,qCAOCA,SAAQ,CAACC,IAAI,EAAE,QAA9BC,MAAM,eACVX,eAAe,CAACW,MAAM,CAACC,IAAI,CAACC,KAAK,CAAC,kFAIlCR,OAAO,CAACC,GAAG,aAAK,qEAGnB,0CACDF,OAAO,EAAE,CAGb,CAAC,CAAC,EAAE,CAAC,CAED,mBACI,oCAGI,uBAAK,UAAQ,CAACD,IAAI,CAAC,YAAU,GAAM,CAEnCJ,YAAY,CAACe,GAAG,CAAC,SAACC,IAAI,CAAG,CAGzB,mBACA,kCAIQ,aAAK,SAAS,CAAC,MAAM,wBACrB,qBAAMA,IAAI,CAACC,KAAK,EAAO,cACvB,qBAAMD,IAAI,CAACE,WAAW,EAAO,cAC7B,qBAAMF,IAAI,CAACG,KAAK,EAAO,CAEtBH,IAAI,CAAClB,QAAQ,CAACiB,GAAG,CAAC,SAACK,OAAO,CAAG,CAC1B,mBACI,qBAEQA,OAAO,CAACC,QAAQ,CAACC,QAAQ,GAAKlB,IAAI,CAClC,IAAI,cACR,aAAuB,SAAS,CAAC,MAAM,wBACvC,uBAAK,aAAW,CAACgB,OAAO,CAACC,QAAQ,CAACC,QAAQ,GAAO,cACjD,qBAAMF,OAAO,CAACG,OAAO,EAAO,GAFlBH,OAAO,CAACI,GAAG,CAGf,EAGJ,CAGlB,CAAC,CAAC,GACQ,EAzBJR,IAAI,CAACQ,GAAG,CA+BR,CAGd,CAAC,CAAC,GAGI,CAQd"},"metadata":{},"sourceType":"module","externalDependencies":[]}