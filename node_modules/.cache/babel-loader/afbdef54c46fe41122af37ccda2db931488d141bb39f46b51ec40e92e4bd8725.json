{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Desktop/FSA/Phase 2/router/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Desktop/FSA/Phase 2/router/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Desktop/FSA/Phase 2/router/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){var setToken=_ref.setToken;// return <div>Login</div>\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();// creating a fetch request for login form \nfunction loginUser(_x){return _loginUser.apply(this,arguments);}function _loginUser(){_loginUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return fetch('https://strangers-things.herokuapp.com/api/2211-ftb-ct-web-pt/users/login',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:userName,password:password}})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:result=_context.sent;setToken(result.data.token);localStorage.setItem(\"token\",result.data.token);localStorage.setItem(\"userName\",userName);navigate(\"/Profile/\".concat(userName));_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[1,14]]);}));return _loginUser.apply(this,arguments);}return/*#__PURE__*/ (//create a login form \n_jsxs(\"form\",{onSubmit:function onSubmit(event){return loginUser(event);},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userName,onChange:function onChange(event){return setUserName(event.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}));}","map":{"version":3,"names":["useState","useEffect","useNavigate","Login","setToken","userName","setUserName","password","setPassword","navigate","loginUser","event","preventDefault","fetch","method","headers","body","JSON","stringify","user","username","response","json","result","data","token","localStorage","setItem","console","log","target","value"],"sources":["C:/Users/User/Desktop/FSA/Phase 2/router/src/components/Login.js"],"sourcesContent":["import {useState,useEffect} from \"react\"\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nexport default function Login({setToken}){\r\n    // return <div>Login</div>\r\n    const[userName,setUserName]=useState(\"\")\r\n    const[password,setPassword]=useState(\"\")\r\n    const navigate = useNavigate();\r\n\r\n\r\n    // creating a fetch request for login form \r\n\r\n    async function loginUser(event){\r\n        event.preventDefault()\r\n        \r\n        try{\r\n            const response = await fetch('https://strangers-things.herokuapp.com/api/2211-ftb-ct-web-pt/users/login',{\r\n                method: \"POST\",\r\n                headers:{\r\n                    'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        user: {\r\n                        username: userName,\r\n                        password: password\r\n                    }\r\n                })\r\n                \r\n            }\r\n            \r\n            )\r\n            let result = await response.json()\r\n           \r\n            setToken(result.data.token)\r\n            localStorage.setItem(\"token\",result.data.token)\r\n            localStorage.setItem(\"userName\", userName)\r\n            navigate(`/Profile/${userName}`)\r\n           \r\n        }catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n    return(\r\n        //create a login form \r\n        <form onSubmit={(event)=>loginUser(event)}>\r\n            <label>Username:</label>\r\n            <input type=\"text\" value={userName} onChange=\r\n            {(event)=>setUserName(event.target.value)}></input>\r\n\r\n            <label>Password:</label>\r\n            <input type=\"password\" value={password} onChange=\r\n            {(event)=>setPassword(event.target.value)}></input>\r\n            <button type=\"submit\">Login</button>\r\n        </form>\r\n    )\r\n\r\n}\r\n\r\n\r\n\r\n\r\n"],"mappings":"0YAAA,OAAQA,QAAQ,CAACC,SAAS,KAAO,OAAO,CACxC,OAAQC,WAAW,KAAO,kBAAkB,CAAC,wFAE7C,cAAe,SAASC,MAAK,MAAY,IAAVC,SAAQ,MAARA,QAAQ,CACnC;AACA,cAA4BJ,QAAQ,CAAC,EAAE,CAAC,wCAAlCK,QAAQ,eAACC,WAAW,eAC1B,eAA4BN,QAAQ,CAAC,EAAE,CAAC,yCAAlCO,QAAQ,eAACC,WAAW,eAC1B,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAG9B;AAAA,QAEeQ,UAAS,yIAAxB,iBAAyBC,KAAK,uIAC1BA,KAAK,CAACC,cAAc,EAAE,uCAGKC,MAAK,CAAC,2EAA2E,CAAC,CACrGC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAC,CACJ,cAAc,CAAE,kBAChB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,IAAI,CAAE,CACNC,QAAQ,CAAEf,QAAQ,CAClBE,QAAQ,CAAEA,QACd,CACJ,CAAC,CAEL,CAAC,CAEA,QAdKc,QAAQ,qCAeKA,SAAQ,CAACC,IAAI,EAAE,QAA9BC,MAAM,eAEVnB,QAAQ,CAACmB,MAAM,CAACC,IAAI,CAACC,KAAK,CAAC,CAC3BC,YAAY,CAACC,OAAO,CAAC,OAAO,CAACJ,MAAM,CAACC,IAAI,CAACC,KAAK,CAAC,CAC/CC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAEtB,QAAQ,CAAC,CAC1CI,QAAQ,oBAAaJ,QAAQ,EAAG,kFAGhCuB,OAAO,CAACC,GAAG,aAAK,qEAEvB,4CACD,oBACI;AACA,cAAM,QAAQ,CAAE,kBAAClB,KAAK,QAAGD,UAAS,CAACC,KAAK,CAAC,EAAC,wBACtC,uBAAO,WAAS,EAAQ,cACxB,cAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAEN,QAAS,CAAC,QAAQ,CAC3C,kBAACM,KAAK,QAAGL,YAAW,CAACK,KAAK,CAACmB,MAAM,CAACC,KAAK,CAAC,EAAC,EAAS,cAEnD,uBAAO,WAAS,EAAQ,cACxB,cAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAExB,QAAS,CAAC,QAAQ,CAC/C,kBAACI,KAAK,QAAGH,YAAW,CAACG,KAAK,CAACmB,MAAM,CAACC,KAAK,CAAC,EAAC,EAAS,cACnD,eAAQ,IAAI,CAAC,QAAQ,UAAC,OAAK,EAAS,GACjC,EAGf"},"metadata":{},"sourceType":"module","externalDependencies":[]}